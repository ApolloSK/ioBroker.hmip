"use strict";var K=Object.defineProperty;var R=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var A=(c,n,t)=>n in c?K(c,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[n]=t,B=(c,n)=>{for(var t in n||(n={}))I.call(n,t)&&A(c,t,n[t]);if(R)for(var t of R(n))W.call(n,t)&&A(c,t,n[t]);return c};var L=(c,n)=>{var t={};for(var i in c)I.call(c,i)&&n.indexOf(i)<0&&(t[i]=c[i]);if(c!=null&&R)for(var i of R(c))n.indexOf(i)<0&&W.call(c,i)&&(t[i]=c[i]);return t};(self.webpackChunkiobroker_admin_component_hmip=self.webpackChunkiobroker_admin_component_hmip||[]).push([["src_HmipComponent_jsx-node_modules_mui_styled-engine_GlobalStyles_GlobalStyles_js-node_module-a20d3a","node_modules_emotion_react_dist_emotion-react_browser_esm_js-_10960","node_modules_emotion_react_dist_emotion-react_browser_esm_js-_10961","node_modules_mui_styled-engine_GlobalStyles_GlobalStyles_js-node_modules_mui_system_useThemeW-fb3b790","node_modules_mui_styled-engine_GlobalStyles_GlobalStyles_js-node_modules_mui_system_useThemeW-fb3b791"],{29795:function(c,n,t){var i=t(4819),d=t.n(i),g=t(15854),m=t.n(g),y=t(22382),_=t(94427),v=t.n(_),E=t(75606),h=t.n(E),f=t(68844),S=t.n(f),T=Object.defineProperty,O=(P,s,r)=>s in P?T(P,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):P[s]=r,b=(P,s,r)=>(O(P,typeof s!="symbol"?s+"":s,r),r),M=(P,s,r)=>new Promise((o,e)=>{var u=p=>{try{a(r.next(p))}catch(C){e(C)}},l=p=>{try{a(r.throw(p))}catch(C){e(C)}},a=p=>p.done?o(p.value):Promise.resolve(p.value).then(u,l);a((r=r.apply(P,s)).next())});class D extends f.ConfigGeneric{constructor(s){super(s),b(this,"onAliveChanged",(r,o)=>{const e=o?o.val:!1;e!==this.state.alive&&this.setState({alive:e},()=>{e&&!this.state.initialized&&setTimeout(()=>this.setState({initialized:!0},()=>this.askState(),100))})}),Object.assign(this.state,{response:!1,running:!1,initialized:!1,alive:!1,error:!1,theme:(0,E.Theme)(this.props.themeName||"light")})}componentDidMount(){super.componentDidMount();const s=this.props.socket.getState(`hmip.${this.props.instance}.alive`);s!=null&&s.val&&this.setState({alive:!0,initialized:!0},()=>this.askState()),this.props.socket.subscribeState(`system.adapter.hmip.${this.props.instance}.alive`,this.onAliveChanged)}componentWillUnmount(){super.componentWillUnmount(),this.props.socket.unsubscribeState(`system.adapter.hmip.${this.props.instance}.alive`,this.onAliveChanged),this.askTimeout&&(clearTimeout(this.askTimeout),this.askTimeout=null)}askState(){return M(this,null,function*(){const s=yield this.props.socket.sendTo(`hmip.${this.props.instance}`,"requestTokenState",null);this.handleResponse(s)&&(this.askTimeout=this.askTimeout||setTimeout(()=>{this.askTimeout=null,this.askState()},300))})}handleResponse(s){switch(s.state){case"startedTokenCreation":return this.setState({response:"started token creation",running:!0}),!0;case"waitForBlueButton":return this.setState({response:"press blue button on accesspoint",running:!0}),!0;case"confirmToken":return this.setState({response:"confirming token",running:!0}),!0;case"errorOccurred":this.setState({response:"error occurred during token generation, look at the logs",running:!1,error:!0});break;case"idle":this.setState({response:'press "request token"',running:!1});break;case"tokenCreated":{this.setState({response:"token created, save settings to use your accesspoint",running:!1}),f.ConfigGeneric.setValue(this.props.data,"authToken",s.authToken),f.ConfigGeneric.setValue(this.props.data,"clientAuthToken",s.clientAuthToken),f.ConfigGeneric.setValue(this.props.data,"clientId",s.clientId),this.props.onChange(this.props.data,void 0,()=>this.props.forceUpdate(["authToken","clientAuthToken","clientId"],this.props.data));break}}return!1}requestToken(){return M(this,null,function*(){const s={accessPointSgtin:f.ConfigGeneric.getValue(this.props.data,"accessPointSgtin"),clientId:f.ConfigGeneric.getValue(this.props.data,"clientId"),pin:f.ConfigGeneric.getValue(this.props.data,"pin")||"",deviceName:f.ConfigGeneric.getValue(this.props.data,"deviceName")};this.setState({response:"started token creation",running:!0,error:!1});const r=yield this.props.socket.sendTo(`hmip.${this.props.instance}`,"requestToken",s);this.handleResponse(r)&&(this.askTimeout=this.askTimeout||setTimeout(()=>{this.askTimeout=null,this.askState()},300))})}renderItem(){if(!this.state.alive&&!this.state.initialized)return d().createElement(y.Z,{theme:this.state.theme},d().createElement("div",null,E.I18n.t("custom_hmip_not_alive")));if(!this.state.initialized)return d().createElement(y.Z,{theme:this.state.theme},d().createElement(_.LinearProgress,null));const s=f.ConfigGeneric.getValue(this.props.data,"accessPointSgtin");return d().createElement(y.Z,{theme:this.state.theme},d().createElement("div",{style:{width:"100%"}},d().createElement("div",{style:{color:this.state.error?this.props.themeType==="dark"?"#c20000":"#800000":void 0}},E.I18n.t(`custom_hmip_${this.state.response}`).replace("custom_hmip_","")),d().createElement(_.Button,{variant:"contained",color:"primary",disabled:this.state.running||!s,onClick:()=>this.requestToken()},this.state.running?d().createElement(_.CircularProgress,{size:24}):E.I18n.t("custom_hmip_request_token"))))}}D.propTypes={socket:m().object.isRequired,themeType:m().string,themeName:m().string,style:m().object,className:m().string,data:m().object.isRequired,attr:m().string,schema:m().object,onError:m().func,onChange:m().func},n.Z=D},21127:function(c,n,t){t.d(n,{F4:function(){return O},iv:function(){return T},xB:function(){return S}});var i=t(61049),d=t(4819),g=t.n(d),m=t(38662),y=t(9745),_=t(50099),v=t(94267),E=t(41281),h=t.n(E),f=function(r,o){var e=arguments;if(o==null||!hasOwn.call(o,"css"))return React.createElement.apply(void 0,e);var u=e.length,l=new Array(u);l[0]=Emotion,l[1]=createEmotionProps(r,o);for(var a=2;a<u;a++)l[a]=e[a];return React.createElement.apply(null,l)},S=(0,i.w)(function(s,r){var o=s.styles,e=(0,_.O)([o],void 0,d.useContext(i.T)),u=d.useRef();return(0,y.j)(function(){var l=r.key+"-global",a=new r.sheet.constructor({key:l,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),p=!1,C=document.querySelector('style[data-emotion="'+l+" "+e.name+'"]');return r.sheet.tags.length&&(a.before=r.sheet.tags[0]),C!==null&&(p=!0,C.setAttribute("data-emotion",l),a.hydrate([C])),u.current=[a,p],function(){a.flush()}},[r]),(0,y.j)(function(){var l=u.current,a=l[0],p=l[1];if(p){l[1]=!1;return}if(e.next!==void 0&&(0,m.My)(r,e.next,!0),a.tags.length){var C=a.tags[a.tags.length-1].nextElementSibling;a.before=C,a.flush()}r.insert("",e,a,!1)},[r,e.name]),null});function T(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(0,_.O)(r)}var O=function(){var r=T.apply(void 0,arguments),o="animation-"+r.name;return{name:o,styles:"@keyframes "+o+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},b=function s(r){for(var o=r.length,e=0,u="";e<o;e++){var l=r[e];if(l!=null){var a=void 0;switch(typeof l){case"boolean":break;case"object":{if(Array.isArray(l))a=s(l);else{a="";for(var p in l)l[p]&&p&&(a&&(a+=" "),a+=p)}break}default:a=l}a&&(u&&(u+=" "),u+=a)}}return u};function M(s,r,o){var e=[],u=getRegisteredStyles(s,e,o);return e.length<2?o:u+r(e)}var D=function(r){var o=r.cache,e=r.serializedArr;return useInsertionEffectAlwaysWithSyncFallback(function(){for(var u=0;u<e.length;u++)insertStyles(o,e[u],!1)}),null},P=null},48213:function(c,n,t){t.d(n,{Z:function(){return E}});var i=t(4819),d=t.n(i),g=t(15854),m=t.n(g),y=t(21127),_=t(67557);function v(h){return h==null||Object.keys(h).length===0}function E(h){const{styles:f,defaultTheme:S={}}=h,T=typeof f=="function"?O=>f(v(O)?S:O):f;return(0,_.jsx)(y.xB,{styles:T})}},20985:function(c,n,t){t.d(n,{V:function(){return E}});var i=t(4819),d=t.n(i),g=t(15854),m=t.n(g),y=t(67557);const _=i.createContext();function v(S){var T=S,{value:h}=T,f=L(T,["value"]);return(0,y.jsx)(_.Provider,B({value:h!=null?h:!0},f))}const E=()=>{const h=i.useContext(_);return h!=null?h:!1};n.Z=v},17989:function(c,n,t){var i=t(4819),d=t.n(i),g=t(61049);function m(_){return Object.keys(_).length===0}function y(_=null){const v=i.useContext(g.T);return!v||m(v)?_:v}n.Z=y},41281:function(c,n,t){var i=t(1892),d={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},g={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},m={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},y={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_={};_[i.ForwardRef]=m,_[i.Memo]=y;function v(M){return i.isMemo(M)?y:_[M.$$typeof]||d}var E=Object.defineProperty,h=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,S=Object.getOwnPropertyDescriptor,T=Object.getPrototypeOf,O=Object.prototype;function b(M,D,P){if(typeof D!="string"){if(O){var s=T(D);s&&s!==O&&b(M,s,P)}var r=h(D);f&&(r=r.concat(f(D)));for(var o=v(M),e=v(D),u=0;u<r.length;++u){var l=r[u];if(!g[l]&&!(P&&P[l])&&!(e&&e[l])&&!(o&&o[l])){var a=S(D,l);try{E(M,l,a)}catch(p){}}}}return M}c.exports=b},57651:function(c,n){/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=typeof Symbol=="function"&&Symbol.for,i=t?Symbol.for("react.element"):60103,d=t?Symbol.for("react.portal"):60106,g=t?Symbol.for("react.fragment"):60107,m=t?Symbol.for("react.strict_mode"):60108,y=t?Symbol.for("react.profiler"):60114,_=t?Symbol.for("react.provider"):60109,v=t?Symbol.for("react.context"):60110,E=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,S=t?Symbol.for("react.suspense"):60113,T=t?Symbol.for("react.suspense_list"):60120,O=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,M=t?Symbol.for("react.block"):60121,D=t?Symbol.for("react.fundamental"):60117,P=t?Symbol.for("react.responder"):60118,s=t?Symbol.for("react.scope"):60119;function r(e){if(typeof e=="object"&&e!==null){var u=e.$$typeof;switch(u){case i:switch(e=e.type,e){case E:case h:case g:case y:case m:case S:return e;default:switch(e=e&&e.$$typeof,e){case v:case f:case b:case O:case _:return e;default:return u}}case d:return u}}}function o(e){return r(e)===h}n.AsyncMode=E,n.ConcurrentMode=h,n.ContextConsumer=v,n.ContextProvider=_,n.Element=i,n.ForwardRef=f,n.Fragment=g,n.Lazy=b,n.Memo=O,n.Portal=d,n.Profiler=y,n.StrictMode=m,n.Suspense=S,n.isAsyncMode=function(e){return o(e)||r(e)===E},n.isConcurrentMode=o,n.isContextConsumer=function(e){return r(e)===v},n.isContextProvider=function(e){return r(e)===_},n.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===i},n.isForwardRef=function(e){return r(e)===f},n.isFragment=function(e){return r(e)===g},n.isLazy=function(e){return r(e)===b},n.isMemo=function(e){return r(e)===O},n.isPortal=function(e){return r(e)===d},n.isProfiler=function(e){return r(e)===y},n.isStrictMode=function(e){return r(e)===m},n.isSuspense=function(e){return r(e)===S},n.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===g||e===h||e===y||e===m||e===S||e===T||typeof e=="object"&&e!==null&&(e.$$typeof===b||e.$$typeof===O||e.$$typeof===_||e.$$typeof===v||e.$$typeof===f||e.$$typeof===D||e.$$typeof===P||e.$$typeof===s||e.$$typeof===M)},n.typeOf=r},1892:function(c,n,t){c.exports=t(57651)}}]);

//# sourceMappingURL=src_HmipComponent_jsx-node_modules_mui_styled-engine_GlobalStyles_GlobalStyles_js-node_module-a20d3a.9e803558.chunk.js.map