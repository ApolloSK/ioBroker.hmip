{"version":3,"file":"static/js/src_bootstrap_jsx.8b327299.chunk.js","mappings":"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","sources":["HmipComponent.jsx","App.jsx","theme.js","bootstrap.jsx","../node_modules/react-dom/client.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    LinearProgress,\n    Button,\n    CircularProgress,\n} from '@mui/material';\n\n// important to make from package and not from some children.\n// invalid\n// import ConfigGeneric from '@iobroker/adapter-react-v5/ConfigGeneric';\n// valid\nimport { ConfigGeneric, I18n } from '@iobroker/adapter-react-v5';\n\nconst styles = () => ({\n});\n\nclass HmipComponent extends ConfigGeneric {\n    constructor(props) {\n        super(props);\n        this.state = {\n            response: false,\n            running: false,\n            initialized: false,\n            alive: false,\n            error: false,\n        };\n    }\n\n    componentDidMount() {\n        super.componentDidMount();\n        const state = this.props.socket.getState(`hmip.${this.props.instance}.alive`);\n        if (state?.val) {\n            this.setState({ alive: true, initialized: true }, () => this.askState());\n        }\n        this.props.socket.subscribeState(`system.adapter.hmip.${this.props.instance}.alive`, this.onAliveChanged);\n    }\n\n    componentWillUnmount() {\n        super.componentWillUnmount();\n        this.props.socket.unsubscribeState(`system.adapter.hmip.${this.props.instance}.alive`, this.onAliveChanged);\n        if (this.askTimeout) {\n            clearTimeout(this.askTimeout);\n            this.askTimeout = null;\n        }\n    }\n\n    async askState() {\n        const response = await this.props.socket.sendTo(`hmip.${this.props.instance}`, 'requestTokenState', null);\n\n        if (this.handleResponse(response)) {\n            this.askTimeout = this.askTimeout || setTimeout(() => {\n                this.askTimeout = null;\n                this.askState();\n            }, 300);\n        }\n    }\n\n    handleResponse(response) {\n        switch (response.state) {\n            case 'startedTokenCreation':\n                this.setState({ response: 'started token creation', running: true });\n                return true;\n            case 'waitForBlueButton':\n                this.setState({ response: 'press blue button on accesspoint', running: true });\n                return true;\n            case 'confirmToken':\n                this.setState({ response: 'confirming token', running: true });\n                return true;\n            case 'errorOccurred':\n                this.setState({ response: 'error occurred during token generation, look at the logs', running: false, error: true });\n                break;\n            case 'idle':\n                this.setState({ response: 'press \"request token\"', running: false });\n                break;\n            case 'tokenCreated': {\n                this.setState({ response: 'token created, save settings to use your accesspoint', running: false });\n                ConfigGeneric.setValue(this.props.data, 'authToken', response.authToken);\n                ConfigGeneric.setValue(this.props.data, 'clientAuthToken', response.clientAuthToken);\n                ConfigGeneric.setValue(this.props.data, 'clientId', response.clientId);\n                this.props.onChange(this.props.data, undefined, () =>\n                    this.props.forceUpdate(['authToken', 'clientAuthToken', 'clientId'], this.props.data));\n                break;\n            }\n        }\n        return false;\n    }\n\n    async requestToken() {\n        const config = {\n            accessPointSgtin: ConfigGeneric.getValue(this.props.data, 'accessPointSgtin'),\n            clientId: ConfigGeneric.getValue(this.props.data, 'clientId'),\n            pin: ConfigGeneric.getValue(this.props.data, 'pin') || '',\n            deviceName: ConfigGeneric.getValue(this.props.data, 'deviceName'),\n        };\n        this.setState({ response: 'started token creation', running: true, error: false });\n        const response = await this.props.socket.sendTo(`hmip.${this.props.instance}`, 'requestToken', config);\n        if (this.handleResponse(response)) {\n            this.askTimeout = this.askTimeout || setTimeout(() => {\n                this.askTimeout = null;\n                this.askState();\n            }, 300);\n        }\n    }\n\n    onAliveChanged = (id, state) => {\n        const alive = state ? state.val : false;\n        if (alive !== this.state.alive) {\n            this.setState({ alive }, () => {\n                if (alive && !this.state.initialized) {\n                    setTimeout(() =>\n                        this.setState({ initialized: true }, () => this.askState(), 100));\n                }\n            });\n        }\n    };\n\n    renderItem() {\n        if (!this.state.alive && !this.state.initialized) {\n            return <div>{I18n.t('custom_hmip_not_alive')}</div>;\n        }\n        if (!this.state.initialized) {\n            return <LinearProgress />;\n        }\n\n        const accessPointSgtin = ConfigGeneric.getValue(this.props.data, 'accessPointSgtin');\n\n        return <div style={{ width: '100%'}}>\n            <div\n                style={{\n                    color: this.state.error ? (this.props.themeType === 'dark' ? '#c20000' : '#800000') : undefined,\n                }}\n            >\n                {I18n.t(`custom_hmip_${this.state.response}`).replace('custom_hmip_', '')}\n            </div>\n            <Button\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={this.state.running || !accessPointSgtin}\n                onClick={() => this.requestToken()}\n            >\n                {this.state.running ? <CircularProgress size={24} /> : I18n.t('custom_hmip_request_token')}\n            </Button>\n        </div>;\n    }\n}\n\nHmipComponent.propTypes = {\n    socket: PropTypes.object.isRequired,\n    themeType: PropTypes.string,\n    themeName: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    data: PropTypes.object.isRequired,\n    attr: PropTypes.string,\n    schema: PropTypes.object,\n    onError: PropTypes.func,\n    onChange: PropTypes.func,\n};\n\nexport default withStyles(styles)(HmipComponent);\n","// this file used only for simulation and not used in end build\n\nimport React from 'react';\nimport { ThemeProvider, StyledEngineProvider } from '@mui/material/styles';\n\nimport withStyles from '@mui/styles/withStyles';\n\nimport GenericApp from '@iobroker/adapter-react-v5/GenericApp';\nimport I18n from '@iobroker/adapter-react-v5/i18n';\nimport Loader from '@iobroker/adapter-react-v5/Components/Loader';\n\nimport HmipComponent from './HmipComponent';\n\nconst styles = theme => ({\n    app: {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary,\n        height: '100%',\n    },\n    item: {\n        padding: 50,\n        width: 400\n    }\n});\n\nclass App extends GenericApp {\n    constructor(props) {\n        const extendedProps = { ...props };\n        super(props, extendedProps);\n\n        this.state = {\n            data: { myCustomAttribute: 'red' },\n            theme: this.createTheme(),\n        };\n        const translations = {\n            en: require('./i18n/en'),\n            de: require('./i18n/de'),\n            ru: require('./i18n/ru'),\n            pt: require('./i18n/pt'),\n            nl: require('./i18n/nl'),\n            fr: require('./i18n/fr'),\n            it: require('./i18n/it'),\n            es: require('./i18n/es'),\n            pl: require('./i18n/pl'),\n            uk: require('./i18n/uk'),\n            'zh-cn': require('./i18n/zh-cn'),\n        };\n\n        I18n.setTranslations(translations);\n        I18n.setLanguage((navigator.language || navigator.userLanguage || 'en').substring(0, 2).toLowerCase());\n    }\n\n    render() {\n        if (!this.state.loaded) {\n            return <StyledEngineProvider injectFirst>\n                <ThemeProvider theme={this.state.theme}>\n                    <Loader theme={this.state.themeType} />\n                </ThemeProvider>\n            </StyledEngineProvider>;\n        }\n\n        return <StyledEngineProvider injectFirst>\n            <ThemeProvider theme={this.state.theme}>\n                <div className={this.props.classes.app}>\n                    <div className={this.props.classes.item}>\n                        <HmipComponent\n                            socket={this.socket}\n                            themeType={this.state.themeType}\n                            themeName={this.state.themeName}\n                            attr='myCustomAttribute'\n                            data={this.state.data}\n                            onError={() => {}}\n                            instance={0}\n                            schema={{\n                                name: 'ConfigCustomHmipSet/Components/HmipComponent',\n                                type: 'custom',\n                            }}\n                            onChange={data => {\n                                this.setState({ data });\n                            }}\n                        />\n                    </div>\n                </div>\n            </ThemeProvider>\n        </StyledEngineProvider>;\n    }\n}\n\nexport default withStyles(styles)(App);","// this file used only for simulation and not used in end build\nimport Theme from '@iobroker/adapter-react-v5/Theme';\n\nexport default type => {\n    const danger = '#dd5325';\n    const success = '#73b6a8';\n    const theme = { ...Theme(type) };\n    if (!theme) {\n        return theme;\n    }\n    theme.palette.text.danger = {\n        color: danger,\n    };\n    theme.palette.text.success = {\n        color: success,\n    };\n\n    return theme;\n};","// this file used only for simulation and not used in end build\n\n/* eslint-disable */\nimport React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { ThemeProvider, StyledEngineProvider } from '@mui/material/styles';\nimport Utils from '@iobroker/adapter-react-v5/Components/Utils';\nimport App from './App';\nimport theme from './theme';\n\nwindow.adapterName = 'adapter-component-template';\nlet themeName = Utils.getThemeName();\n\nfunction build() {\n    const container = document.getElementById('root');\n    const root = createRoot(container);\n    return root.render(<React.StrictMode>\n        <StyledEngineProvider injectFirst>\n            <ThemeProvider theme={theme(themeName)}>\n                <App\n                    socket={{port: 8081}}\n                    onThemeChange={(_theme) => {\n                        themeName = _theme;\n                        build();\n                    }}\n                />\n            </ThemeProvider>\n        </StyledEngineProvider>\n    </React.StrictMode>);\n}\n\nbuild();","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n"],"names":["styles","HmipComponent","props","id","state","alive","response","config","accessPointSgtin","theme","App","extendedProps","translations","StyledEngineProvider","ThemeProvider","data","withStyles","type","danger","success","Theme","themeName","build","container","_theme","m","exports"],"sourceRoot":""}